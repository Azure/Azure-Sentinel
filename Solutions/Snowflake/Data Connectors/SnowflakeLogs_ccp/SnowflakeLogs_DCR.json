{
  "name": "SnowflakeDCR",
  "apiVersion": "2023-03-11",
  "type": "Microsoft.Insights/dataCollectionRules",
  "location": "{{location}}",
  "properties": {
    "dataCollectionEndpointId": "{{dataCollectionEndpointId}}",
    "streamDeclarations": {
      "Custom-SnowflakeLoad": {
        "columns": [
          {
            "name": "data",
            "type": "dynamic"
          }
        ]
      },
      "Custom-SnowflakeLogin": {
        "columns": [
          {
            "name": "data",
            "type": "dynamic"
          }
        ]
      },
      "Custom-SnowflakeMaterializedView": {
        "columns": [
          {
            "name": "data",
            "type": "dynamic"
          }
        ]
      },
      "Custom-SnowflakeQuery": {
        "columns": [
          {
            "name": "data",
            "type": "dynamic"
          }
        ]
      },
      "Custom-SnowflakeRoleGrant": {
        "columns": [
          {
            "name": "data",
            "type": "dynamic"
          }
        ]
      },
      "Custom-SnowflakeRoles": {
        "columns": [
          {
            "name": "data",
            "type": "dynamic"
          }
        ]
      },
      "Custom-SnowflakeTable": {
        "columns": [
          {
            "name": "data",
            "type": "dynamic"
          }
        ]
      },
      "Custom-SnowflakeTableStorageMetrics": {
        "columns": [
          {
            "name": "data",
            "type": "dynamic"
          }
        ]
      },
      "Custom-SnowflakeUserGrant": {
        "columns": [
          {
            "name": "data",
            "type": "dynamic"
          }
        ]
      },
      "Custom-SnowflakeUsers": {
        "columns": [
          {
            "name": "data",
            "type": "dynamic"
          }
        ]
      }
    },
    "destinations": {
      "logAnalytics": [
        {
          "workspaceResourceId": "{{workspaceResourceId}}",
          "name": "clv2ws1"
        }
      ]
    },
    "dataFlows": [
      {
        "streams": [
          "Custom-SnowflakeLoad"
        ],
        "destinations": [
          "clv2ws1"
        ],
        "outputStream": "Custom-SnowflakeLoad_CL",
        "transformKql": "source \r\n| extend Data = tostring(data), TimeGenerated = now() \r\n| where Data !contains \"[]\"\r\n| project TimeGenerated, Data"
      },
      {
        "streams": [
          "Custom-SnowflakeLogin"
        ],
        "destinations": [
          "clv2ws1"
        ],
        "outputStream": "Custom-SnowflakeLogin_CL",
        "transformKql": "source \r\n| extend Data = tostring(data), TimeGenerated = now() \r\n| where Data !contains \"[]\"\r\n| project TimeGenerated, Data"
      },
      {
        "streams": [
          "Custom-SnowflakeMaterializedView"
        ],
        "destinations": [
          "clv2ws1"
        ],
        "outputStream": "Custom-SnowflakeMaterializedView_CL",
        "transformKql": "source \r\n| extend Data = tostring(data), TimeGenerated = now() \r\n| where Data !contains \"[]\"\r\n| project TimeGenerated, Data"
      },
      {
        "streams": [
          "Custom-SnowflakeQuery"
        ],
        "destinations": [
          "clv2ws1"
        ],
        "outputStream": "Custom-SnowflakeQuery_CL",
        "transformKql": "source \r\n| extend Data = tostring(data), TimeGenerated = now() \r\n| where Data !contains \"[]\"\r\n| project TimeGenerated, Data"
      },
      {
        "streams": [
          "Custom-SnowflakeRoleGrant"
        ],
        "destinations": [
          "clv2ws1"
        ],
        "outputStream": "Custom-SnowflakeRoleGrant_CL",
        "transformKql": "source \r\n| extend Data = tostring(data), TimeGenerated = now() \r\n| where Data !contains \"[]\"\r\n| project TimeGenerated, Data"
      },
      {
        "streams": [
          "Custom-SnowflakeRoles"
        ],
        "destinations": [
          "clv2ws1"
        ],
        "outputStream": "Custom-SnowflakeRoles_CL",
        "transformKql": "source \r\n| extend Data = tostring(data), TimeGenerated = now() \r\n| where Data !contains \"[]\"\r\n| project TimeGenerated, Data"
      },
      {
        "streams": [
          "Custom-SnowflakeTable"
        ],
        "destinations": [
          "clv2ws1"
        ],
        "outputStream": "Custom-SnowflakeTables_CL",
        "transformKql": "source \r\n| extend Data = tostring(data), TimeGenerated = now() \r\n| where Data !contains \"[]\"\r\n| project TimeGenerated, Data"
      },
      {
        "streams": [
          "Custom-SnowflakeTableStorageMetrics"
        ],
        "destinations": [
          "clv2ws1"
        ],
        "outputStream": "Custom-SnowflakeTableStorageMetrics_CL",
        "transformKql": "source \r\n| extend Data = tostring(data), TimeGenerated = now() \r\n| where Data !contains \"[]\"\r\n| project TimeGenerated, Data"
      },
      {
        "streams": [
          "Custom-SnowflakeUserGrant"
        ],
        "destinations": [
          "clv2ws1"
        ],
        "outputStream": "Custom-SnowflakeUserGrant_CL",
        "transformKql": "source \r\n| extend Data = tostring(data), TimeGenerated = now() \r\n| where Data !contains \"[]\"\r\n| project TimeGenerated, Data"
      },
      {
        "streams": [
          "Custom-SnowflakeUsers"
        ],
        "destinations": [
          "clv2ws1"
        ],
        "outputStream": "Custom-SnowflakeUsers_CL",
        "transformKql": "source \r\n| extend Data = tostring(data), TimeGenerated = now() \r\n| where Data !contains \"[]\"\r\n| project TimeGenerated, Data"
      }
    ]
  }
}