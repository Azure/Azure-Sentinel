{
    "name": "app-events-dcr",
    "apiVersion": "2021-09-01-preview",
    "type": "Microsoft.Insights/dataCollectionRules",
    "location": "{{location}}",
    "kind": null,
    "properties": {
        "dataCollectionEndpointId": "{{dataCollectionEndpointId}}",
        "streamDeclarations": {
            "Custom-AppEvents_CL": {
                "columns": [
                    {
                    "name": "app_id",
                    "type": "string"
                    },
                    {
                    "name": "org_id",
                    "type": "string"
                    },
                    {
                    "name": "package",
                    "type": "string"
                    },
                    {
                    "name": "version",
                    "type": "string"
                    },
                    {
                    "name": "platform",
                    "type": "string"
                    },
                    {
                    "name": "mdm_source",
                    "type": "string"
                    },
                    {
                    "name": "mdm_device_id",
                    "type": "string"
                    },
                    {
                    "name": "device_os_build_version",
                    "type": "string"
                    },
                    {
                    "name": "result_type",
                    "type": "string"
                    },
                    {
                    "name": "results",
                    "type": "dynamic"
                    },
                    {
                    "name": "received_at",
                    "type": "datetime"
                    }
                ]
            }
        },
        "destinations": {
            "logAnalytics": [
                {
                    "workspaceResourceId": "{{workspaceResourceId}}",
                    "name": "clv2ws1"
                }
            ]
        },
        "dataFlows": [
            {
                "streams": ["Custom-AppEvents_CL"],
                "destinations": ["clv2ws1"],
                "transformKql": "source | extend TimeGenerated = now()",
                "outputStream": "Custom-QscoutAppEvents_CL"
            }
        ]
    }
}
