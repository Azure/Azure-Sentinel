{
    "name": "[concat(parameters('workspace'),'/Microsoft.SecurityInsights/', 'NetskopeWebTransactions')]",
    "apiVersion": "2022-12-01-preview",
    "type": "Microsoft.OperationalInsights/workspaces/providers/dataConnectors",
    "location": "[parameters('workspace-location')]",
    "kind": "StorageAccountBlobContainer",
    "properties": {
        "connectorDefinitionName": "[[parameters('connectorDefinitionName')]",
        "dcrConfig": {
            "streamName": "Custom-NetskopeWebTx",
            "dataCollectionEndpoint": "[[parameters('dcrConfig').dataCollectionEndpoint]",
            "dataCollectionRuleImmutableId": "[[parameters('dcrConfig').dataCollectionRuleImmutableId]"
        },
        "auth": {
            "type": "ServicePrincipal"
        },
        "request": {
            "QueueUri": "[[concat('https://', variables('storageAccountName'), '.queue.core.windows.net/', variables('queueName'))]",
            "DlqUri": "[[concat('https://', variables('storageAccountName'), '.queue.core.windows.net/', variables('dlqName'))]"
        },
        "response": {
            "eventsJsonPaths": [
                "$"
            ],
            "format": "csv",
            "isGzipCompressed": true
        }
    },
    "dependsOn": []
}